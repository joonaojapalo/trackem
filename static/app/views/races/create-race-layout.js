// Generated by CoffeeScript 1.10.0
(function() {
  define(["jquery", "underscore", "radio", "marionette", "text!templates/races/add-modal", "widgets/select", "stores/maps"], function($, _, Radio, Marionette, template, SelectView, mapsStore) {
    var CreateRaceLayout;
    return CreateRaceLayout = Marionette.LayoutView.extend({
      template: template,
      regions: {
        mapsRegion: '[data-region="maps-dropdown"]'
      },
      initialize: function() {
        _.bindAll(this, "mount");
        return this.mapsPromise = mapsStore.fetch();
      },
      onBeforeShow: function() {
        return $.when(this.mapsPromise).done(this.mount);
      },
      mount: function(maps) {
        return this.mapsRegion.show(new SelectView({
          prefix: "select:map",
          collection: maps,
          nameAttr: "name",
          valueAttr: "id"
        }));
      },
      onSelectMap: function(model) {
        return console.log("select:change", model);
      }
    });
  });

}).call(this);
