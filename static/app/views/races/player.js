// Generated by CoffeeScript 1.10.0
(function() {
  define(["radio", "app/state", "underscore", "marionette", "text!templates/races/player"], function(Radio, state, _, Marionette, template) {
    var RacePlayerView;
    return RacePlayerView = Marionette.ItemView.extend({
      template: template,
      templateHelpers: function() {
        return {
          followUrl: state["const"].url.followAPI + "/" + (this.model.get("race_hash"))
        };
      },
      ui: {
        start: '[data-action="start"]',
        stop: '[data-action="stop"]'
      },
      events: {
        "click @ui.start": "start",
        "click @ui.stop": "stop"
      },
      initialize: function() {
        return this.model.on("change", this.render);
      },
      onRender: function() {
        var status;
        status = this.model.get("status");
        return console.log("render", status);
      },
      start: function() {
        var promise;
        return promise = this.model.save({
          status: "started"
        }, {
          wait: true
        });
      },
      stop: function() {
        var promise;
        return promise = this.model.save({
          status: "stopped"
        });
      }
    });
  });

}).call(this);
